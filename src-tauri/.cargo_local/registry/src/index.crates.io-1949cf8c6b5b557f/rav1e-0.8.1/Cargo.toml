# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2021"
rust-version = "1.83.0"
name = "rav1e"
version = "0.8.1"
authors = ["Thomas Daede <tdaede@xiph.org>"]
build = "build.rs"
include = [
    "/Cargo.toml",
    "/LICENSE",
    "/PATENTS",
    "/README.md",
    "/build.rs",
    "/cbindgen.toml",
    "/src/**",
]
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
default-run = "rav1e"
description = "The fastest and safest AV1 encoder"
readme = "README.md"
license = "BSD-2-Clause"
repository = "https://github.com/xiph/rav1e/"

[package.metadata.docs.rs]
no-default-features = true

[features]
asm = [
    "nasm-rs",
    "cc",
]
bench = []
binaries = [
    "ivf",
    "y4m",
    "clap",
    "clap_complete",
    "scan_fmt",
    "fern",
    "console",
    "av-metrics",
    "nom",
]
capi = ["scan_fmt"]
channel-api = ["crossbeam"]
check_asm = []
decode_test = ["aom-sys"]
decode_test_dav1d = ["dav1d-sys"]
default = [
    "binaries",
    "asm",
    "threading",
    "signal_support",
    "git_version",
]
desync_finder = ["backtrace"]
dump_ivf = ["ivf"]
dump_lookahead_data = [
    "byteorder",
    "image",
]
git_version = ["built/git2"]
quick_test = []
serialize = [
    "serde",
    "toml",
    "v_frame/serialize",
    "serde-big-array",
    "av1-grain/serialize",
]
signal_support = ["signal-hook"]
threading = ["rayon/threads"]
tracing = [
    "profiling/profile-with-tracing",
    "tracing-subscriber",
    "tracing-chrome",
    "dep:tracing",
]
unstable = []
wasm = ["wasm-bindgen"]

[lib]
name = "rav1e"
path = "src/lib.rs"
bench = false

[[bin]]
name = "rav1e"
path = "src/bin/rav1e.rs"
bench = false
required-features = ["binaries"]

[[bin]]
name = "rav1e-ch"
path = "src/bin/rav1e-ch.rs"
bench = false
required-features = [
    "binaries",
    "channel-api",
    "unstable",
]

[dependencies.aligned-vec]
version = "0.6.0"

[dependencies.aom-sys]
version = "0.3.3"
optional = true

[dependencies.arg_enum_proc_macro]
version = "0.3.4"

[dependencies.arrayvec]
version = "0.7"

[dependencies.av-metrics]
version = "0.9.1"
optional = true
default-features = false

[dependencies.av-scenechange]
version = "0.14.1"
default-features = false

[dependencies.av1-grain]
version = "0.2.3"

[dependencies.backtrace]
version = "0.3"
optional = true

[dependencies.bitstream-io]
version = "4.1.0"

[dependencies.byteorder]
version = "1.5.0"
optional = true

[dependencies.cfg-if]
version = "1.0"

[dependencies.clap]
version = "4.5"
features = [
    "color",
    "std",
    "wrap_help",
    "derive",
]
optional = true
default-features = false

[dependencies.clap_complete]
version = "4.5"
optional = true

[dependencies.console]
version = "0.15"
optional = true

[dependencies.crossbeam]
version = "0.8"
optional = true

[dependencies.dav1d-sys]
version = "0.7.0"
optional = true
package = "libdav1d-sys"

[dependencies.fern]
version = "0.7"
optional = true

[dependencies.image]
version = "0.25.0"
features = ["png"]
optional = true
default-features = false

[dependencies.itertools]
version = "0.14"

[dependencies.ivf]
version = "0.1"
optional = true

[dependencies.libc]
version = "0.2"

[dependencies.log]
version = "0.4"

[dependencies.new_debug_unreachable]
version = "1.0.4"

[dependencies.nom]
version = "8.0.0"
optional = true

[dependencies.noop_proc_macro]
version = "0.3.0"

[dependencies.num-derive]
version = "0.4"

[dependencies.num-traits]
version = "0.2"

[dependencies.paste]
version = "1.0"

[dependencies.profiling]
version = "1"

[dependencies.rayon]
version = "0.1"
default-features = false
package = "maybe-rayon"

[dependencies.scan_fmt]
version = "0.2.6"
optional = true
default-features = false

[dependencies.serde]
version = "1.0"
features = ["derive"]
optional = true

[dependencies.serde-big-array]
version = "0.5.1"
optional = true

[dependencies.simd_helpers]
version = "0.1"

[dependencies.thiserror]
version = "2.0"

[dependencies.toml]
version = "0.8"
optional = true

[dependencies.tracing]
version = "0.1.40"
optional = true

[dependencies.tracing-chrome]
version = "0.7.1"
optional = true

[dependencies.tracing-subscriber]
version = "0.3.18"
optional = true

[dependencies.v_frame]
version = "0.3.7"

[dependencies.wasm-bindgen]
version = "0.2.90"
optional = true

[dependencies.y4m]
version = "0.8"
optional = true

[dev-dependencies.interpolate_name]
version = "0.2.4"

[dev-dependencies.nom]
version = "8.0.0"

[dev-dependencies.pretty_assertions]
version = "1.4.0"

[dev-dependencies.quickcheck]
version = "1.0"

[dev-dependencies.rand]
version = "0.9"

[dev-dependencies.rand_chacha]
version = "0.9"

[dev-dependencies.semver]
version = "1.0"

[build-dependencies.built]
version = "0.8.0"
features = []

[build-dependencies.cc]
version = "1.0"
features = ["parallel"]
optional = true

[build-dependencies.nasm-rs]
version = "0.3"
features = ["parallel"]
optional = true

[target."cfg(fuzzing)".dependencies.arbitrary]
version = "1.3"

[target."cfg(fuzzing)".dependencies.interpolate_name]
version = "0.2.4"

[target."cfg(fuzzing)".dependencies.libfuzzer-sys]
version = "0.4.7"

[target."cfg(fuzzing)".dependencies.rand]
version = "0.9"

[target."cfg(fuzzing)".dependencies.rand_chacha]
version = "0.9"

[target.'cfg(not(target_arch = "wasm32"))'.dev-dependencies.assert_cmd]
version = "2.0"

[target.'cfg(not(target_arch = "wasm32"))'.dev-dependencies.criterion]
version = "0.6"

[target.'cfg(target_arch = "wasm32")'.dev-dependencies.criterion]
version = "0.6"
default-features = false

[target."cfg(unix)".dependencies.signal-hook]
version = "0.3"
optional = true

[lints.clippy]
comparison_chain = "allow"
doc_link_with_quotes = "warn"
doc_markdown = "warn"
enum_variant_names = "allow"
missing_errors_doc = "warn"
missing_panics_doc = "warn"
missing_safety_doc = "warn"
needless_range_loop = "allow"
too_many_arguments = "allow"
upper_case_acronyms = "allow"

[lints.rust.unexpected_cfgs]
level = "warn"
priority = 0
check-cfg = [
    "cfg(nasm_x86_64)",
    "cfg(asm_neon)",
    "cfg(cargo_c)",
    "cfg(fuzzing)",
]

[profile.bench]
incremental = true

[profile.dev]
opt-level = 1

[profile.release]
lto = "thin"
debug = 2
incremental = true

[profile.release-no-lto]
lto = "off"
inherits = "release"

[profile.release-strip]
inherits = "release"
strip = "symbols"
